<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Maiste.fr</title>
    <link rel="me" href="https://fosstodon.org/@maiste" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="RSS Feed for maiste.fr"
      href="/rss.xml"
    />

    <!-- Main CSS -->
    <link href="/static/css/main.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="/static/fonts/import.css" rel="stylesheet" />

    <!-- Code Highlighting -->
    <link href="/static/css/code.css" rel="stylesheet" type="text/css" />
    <script src="/static/script/highlight.min.js"></script>
  </head>

  <!-- Umami -->
  <script
    defer
    src="https://analytics.maiste.fr/script.js"
    data-website-id="b1e6219d-8044-47d9-9e91-44db862e2732"
    data-do-not-track="true"
  ></script>
  <!-- End Umami code -->

  <!-- Theme -->
  <script>
    let userTheme =
      localStorage.getItem("theme") ??
      (window.matchMedia("(prefers-color-scheme: light)").matches
        ? "light"
        : "dark");
    if (userTheme) {
      document.documentElement.setAttribute("data-theme", userTheme);
    }
    function switchTheme() {
      let currentTheme = document.documentElement.getAttribute("data-theme");
      let newTheme = currentTheme === "light" ? "dark" : "light";
      document.documentElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
    }
  </script>
  <!-- End Theme code -->

  <body>
    <header>
      <nav>
        <h2><a href="/">Maiste</a></h2>
        <ul>
          <li><a href="/about">About</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/projects">Projects</a></li>
          <li><a href="/wiki">Wiki</a></li>
          <li>
            <button id="theme-toggle" onclick="switchTheme()">
              <svg
                id="theme-moon"
                width="23.977"
                xmlns="http://www.w3.org/2000/svg"
                height="24"
                fill="none"
              >
                <g class="feather feather-moon" style="fill: rgb(0, 0, 0)">
                  <path
                    d="M20.979,12.790C20.542,17.526,16.499,21.104,11.750,20.958C7.001,20.812,3.185,16.992,3.039,12.238C2.894,7.484,6.468,3.438,11.199,3.000C9.141,5.786,9.430,9.660,11.878,12.111C14.326,14.561,18.196,14.850,20.979,12.790ZZ"
                    fill="none"
                    style="fill: currentColor"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M20.979,12.790C20.542,17.526,16.499,21.104,11.750,20.958C7.001,20.812,3.185,16.992,3.039,12.238C2.894,7.484,6.468,3.438,11.199,3.000C9.141,5.786,9.430,9.660,11.878,12.111C14.326,14.561,18.196,14.850,20.979,12.790ZZ"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                </g>
              </svg>

              <svg
                id="theme-sun"
                width="24"
                xmlns="http://www.w3.org/2000/svg"
                height="24"
                fill="currentColor"
              >
                <g class="feather feather-sun">
                  <ellipse
                    cx="12"
                    cy="12"
                    rx="5"
                    ry="5"
                    transform="matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)"
                    fill="currentColor"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <ellipse
                      cx="12"
                      cy="12"
                      rx="5"
                      ry="5"
                      transform="matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M12.000,1.000L12.000,3.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M12.000,1.000L12.000,3.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M12.000,21.000L12.000,23.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M12.000,21.000L12.000,23.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M4.220,4.220L5.640,5.640"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M4.220,4.220L5.640,5.640"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M18.360,18.360L19.780,19.780"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M18.360,18.360L19.780,19.780"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M1.000,12.000L3.000,12.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M1.000,12.000L3.000,12.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M21.000,12.000L23.000,12.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M21.000,12.000L23.000,12.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M4.220,19.780L5.640,18.360"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M4.220,19.780L5.640,18.360"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M18.360,5.640L19.780,4.220"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M18.360,5.640L19.780,4.220"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                </g>
              </svg>
            </button>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <div class="container"><article>
  <h1>React</h1>
  <div class="metadata"><p>description: Bibliotèque React JS</p><p>language: fr
    </p>
  </div><h2 id="philosophie"><a class="anchor" aria-hidden="true" href="#philosophie"></a>Philosophie</h2>
<h3 id="introduction"><a class="anchor" aria-hidden="true" href="#introduction"></a>Introduction</h3>
<ul>
<li>Dev par Facebook en 2013</li>
<li>JSX (aujourd'hui TSX)</li>
<li>Approche composant avec une gestion du cycle de vie et des états locaux (states)</li>
</ul>
<h3 id="version-notables"><a class="anchor" aria-hidden="true" href="#version-notables"></a>Version notables</h3>
<ul>
<li><code>16.0</code> (2017) -&gt; <code>Fragments</code>, changement dans le cycle de vie, Server Side Rendering</li>
<li><code>16.3</code> (2018) -&gt; <code>Context API</code></li>
<li><code>16.8</code> (2019) -&gt; <code>Hooks</code></li>
<li><code>18</code> (2022) -&gt; <code>Concurrent</code> management</li>
</ul>
<h3 id="architecture"><a class="anchor" aria-hidden="true" href="#architecture"></a>Architecture</h3>
<pre><code class="language-ascii">                        ┌───────────────────┐
                        │                   │
                        │  React Component  │
     Props  ──────────► │                   │ ──────────►   render
                        │  - State          │
                        │                   │
                        └───────────────────┘
</code></pre>
<h4 id="props"><a class="anchor" aria-hidden="true" href="#props"></a>Props</h4>
<ul>
<li>C'est récupéré depuis le composant qui instancie. C'est une ressource immutable :</li>
</ul>
<pre><code class="language-tsx">class Cat extends React.Component {
  render() {
    return &lt;h1&gt;{this.props.name} section&lt;/h1&gt;;
  }
}

class App extends React.Component {
  render() {
  return (
    &lt;div&gt;
     &lt;Cat name=”Jim” /&gt;
    &lt;/div&gt;
  );
  }
}
</code></pre>
<h4 id="states"><a class="anchor" aria-hidden="true" href="#states"></a>States</h4>
<ul>
<li>C'est limité au composant, modifiable et asynchrone:</li>
</ul>
<pre><code class="language-tsx">class Cat extends React.Component {

 constructor(props) {
   super(props);
   this.state = {
	name: “Jim”
   };
 }

  render() {
    return &lt;div&gt;{ this.state.name }&lt;/div&gt;;
  }
}
</code></pre>
<h4 id="nouvelle-version"><a class="anchor" aria-hidden="true" href="#nouvelle-version"></a>Nouvelle version</h4>
<ul>
<li>On est passé d'une approche <code>Class component</code> à une approche <code>Functional component</code>:</li>
</ul>
<pre><code class="language-tsx">class Cat extends React.Component {
  render() {
    return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
  }
}
</code></pre>
<p>devient</p>
<pre><code class="language-tsx">function Cat(props) {
    return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
}
</code></pre>
<h3 id="cycle-de-vie"><a class="anchor" aria-hidden="true" href="#cycle-de-vie"></a>Cycle de Vie</h3>
<pre><code class="language-ascii">
             ┌─────────────────────────┐    ┌──────────────────────┐   ┌────────────────────────┐
             │                         │    │                      │   │                        │
             │   Mounting              │    │   Updating           │   │ Unmounting             │
             │                         │    │                      │   │                        │
             │                         │    │                      │   │     │                  │
             │   Constructor           │    │                      │   │     │                  │
             │                         │    │                      │   │     │                  │
             │         │               │    │                      │   │     │                  │
             │         │               │    │                      │   │     │                  │
             │         │               │    │                      │   │     │                  │
             │         │               │    │                      │   │     │                  │
             │    ┌────▼───────────────┼────┼─────────────┐        │   │     │                  │
             │    │                    │    │             │        │   │     │                  │
             │    │           render   │    │             │        │   │     │                  │
             │    │                    │    │             │        │   │     │                  │
             │    └────────┬───────────┼────┼────────┬────┘        │   │     │                  │
             │             │           │    │        │             │   │     │                  │
             │             │           │    │        │             │   │     ▼                  │
             │             ▼           │    │        ▼             │   │                        │
             │                         │    │                      │   │                        │
             │   ComponentDidMount     │    │ ComponentDidUpdate   │   │  ComponentDidUnmount   │
             │                         │    │                      │   │                        │
             │                         │    │                      │   │                        │
             └─────────────────────────┘    └──────────────────────┘   └────────────────────────┘

</code></pre>
<hr />
<h2 id="code"><a class="anchor" aria-hidden="true" href="#code"></a>Code</h2>
<h3 id="fragments"><a class="anchor" aria-hidden="true" href="#fragments"></a>Fragments</h3>
<ul>
<li>Permet de rendre des composants HTML au même niveau sans avoir besoin de &quot;nested&quot;:</li>
</ul>
<pre><code class="language-tsx">&lt;&gt;
    /* Mon code */
&lt;/&gt;
</code></pre>
<p>est équivalent à</p>
<pre><code class="language-tsx">&lt;Fragment&gt;
/* Mon code */
&lt;/Fragment&gt;
</code></pre>
<h3 id="keys"><a class="anchor" aria-hidden="true" href="#keys"></a>Keys</h3>
<ul>
<li>Penser à utiliser les <em>keys</em> dans les composant pour permettre à <code>React</code> de faire le rendu dans le bon sens.</li>
</ul>
<h3 id="get-started"><a class="anchor" aria-hidden="true" href="#get-started"></a>Get Started</h3>
<p>Pour créer une app <code>React</code> avec <code>npx</code>, on utilise <em>Create React App</em> (CRA) :</p>
<pre><code class="language-sh">  npx create-react-app front --template typescript
  cd front
  npm start
</code></pre>
<hr />
<h2 id="router"><a class="anchor" aria-hidden="true" href="#router"></a>Router</h2>
<ul>
<li>Avec react on peut avoir un router qui manipule l'API <code>history</code> du DOM Html. Le package à installer est le suivant: <code>react-router-dom@6</code></li>
</ul>
<hr />
<h2 id="context"><a class="anchor" aria-hidden="true" href="#context"></a>Context</h2>
<p>Les <em>Context</em> permettent de partager des données en profondeur dans l'arbre sans avoir besoin de passer les éléments à travers les <code>props</code>.
Il possède deux éléments clefs:</p>
<ul>
<li><code>Provider</code> qui déclare et fournit les données du contexte.</li>
<li><code>Consumer</code> qui conomme et récupère les données du contexte</li>
</ul>
<hr />
<h2 id="redux"><a class="anchor" aria-hidden="true" href="#redux"></a>Redux</h2>
<ul>
<li>Permet de faire ce que fait les <em>Context</em> avant leur introduction.</li>
<li>Il possède un état global appelé le <strong>Store</strong>.</li>
<li>C'est une _<em>conteneur à état prédictible</em>: en fonction des inputs, on peut prévoir l'état suivant.</li>
<li>Les <em>actions</em> sont déclenchées par les composants <em>React</em> et modifie l'état du Store</li>
<li>La réponse est produite et récupérée par un <em>reducer</em> qui fabrique un nouvel état du store à partir de l'état <strong>précédent</strong> et de la réponse de l'<strong>action</strong>.</li>
<li>Pour l'action, utilisation de <strong>fonctions pures</strong> : (pas de variations de sorties pour les mêmes arguments + pas d'effets de bord).</li>
<li>Les <em>selectors</em> permettent d'obtenir le resultat depuis le store.</li>
</ul>
<hr />
<h2 id="test"><a class="anchor" aria-hidden="true" href="#test"></a>Test</h2>
<h3 id="react-testing-library-rtl"><a class="anchor" aria-hidden="true" href="#react-testing-library-rtl"></a>React Testing Library (RTL)</h3>
<ul>
<li>Permet d'interagir avec les composants <em>React</em>.</li>
</ul>
<h3 id="smoke-test"><a class="anchor" aria-hidden="true" href="#smoke-test"></a>Smoke test</h3>
<ul>
<li>Permet de vérifier qu'un composant s'affiche sans crash.</li>
</ul>
<h3 id="snapshot-test"><a class="anchor" aria-hidden="true" href="#snapshot-test"></a>Snapshot test</h3>
<ul>
<li>Vérifier si le rendu d'un html est bon.</li>
</ul>
<h3 id="mock-test"><a class="anchor" aria-hidden="true" href="#mock-test"></a>Mock test</h3>
<ul>
<li>permet de vérifier que les composants s'affichent comme il le faut.</li>
</ul>
<hr />
<h2 id="formulaire"><a class="anchor" aria-hidden="true" href="#formulaire"></a>Formulaire</h2>
<h3 id="uncontrolled-vs-controlled-component"><a class="anchor" aria-hidden="true" href="#uncontrolled-vs-controlled-component"></a>Uncontrolled vs controlled component</h3>
<ul>
<li>Les <em>Uncontrolled components</em> sont des composants qui sont gérés par le <code>DOM</code> html.</li>
<li>Les <em>Controlled components</em> sont des composants dont l'état interne est géré par React.</li>
</ul>
<h3 id="uncontrolled"><a class="anchor" aria-hidden="true" href="#uncontrolled"></a>Uncontrolled</h3>
<p>Pour faire un <em>uncontrolled</em>, on définit une référence que l'on donne en attribut :</p>
<pre><code class="language-tsx">// Valeur de input est accessible via nameInputRef.current.value
// Nous devons utiliser defaultValue pour initialiser l'input
function NameFormUncontrolled({defaultValue}: {defaultValue: string}) {
  const nameInputRef = useRef&lt;HTMLInputElement&gt;(null);
  return (
    &lt;div&gt;
      &lt;input defaultValue={defaultValue} ref={nameInputRef} placeholder=&quot;name&quot; /&gt;
    &lt;/div&gt;
  );

</code></pre>
<h3 id="controlled"><a class="anchor" aria-hidden="true" href="#controlled"></a>Controlled</h3>
<ul>
<li>On récupère l'état interne via un <em>State</em> :</li>
</ul>
<pre><code class="language-tsx">function NameFormControlled() {
  const [name, setName] = useState(&quot;&quot;);
  return (
    &lt;div&gt;
      &lt;input
        onChange={(inputEvent) =&gt; setName(inputEvent.target.value)}
        defaultValue={name}
      /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3 id="react-hook-form"><a class="anchor" aria-hidden="true" href="#react-hook-form"></a>React Hook Form</h3>
<p>Il s'agit d&quot;une bibliotèque permettant de construire un formulaire sans avoir trop de code redondant.</p>
<pre><code class="language-sh">npm install react-hook-form
</code></pre>
</article>
</div>
    </main>

    <footer>
      <p>
        This site is part of the
        <a href="https://ring.muhokama.fun">Muhokama ring</a>
      </p>
      <p>
        <a href="https://ring.muhokama.fun/u/maiste/pred">Previous</a> -
        <a href="https://ring.muhokama.fun/u/maiste/succ">Next</a>
      </p>
      <p>
        Website written proudly with
        <a href="https://github.com/xhtmlboy/yocaml">Yocaml</a> ♡
      </p>
    </footer>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
