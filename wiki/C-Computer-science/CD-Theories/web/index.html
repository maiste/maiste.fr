<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Maiste.fr</title>
    <link rel="me" href="https://fosstodon.org/@maiste" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="RSS Feed for maiste.fr"
      href="/rss.xml"
    />

    <!-- Main CSS -->
    <link href="/static/css/main.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="/static/fonts/import.css" rel="stylesheet" />

    <!-- Code Highlighting -->
    <link href="/static/css/code.css" rel="stylesheet" type="text/css" />
    <script src="/static/script/highlight.min.js"></script>
  </head>

  <!-- Umami -->
  <script
    defer
    src="https://analytics.maiste.fr/script.js"
    data-website-id="b1e6219d-8044-47d9-9e91-44db862e2732"
    data-do-not-track="true"
  ></script>
  <!-- End Umami code -->

  <!-- Theme -->
  <script>
    let userTheme =
      localStorage.getItem("theme") ??
      (window.matchMedia("(prefers-color-scheme: light)").matches
        ? "light"
        : "dark");
    if (userTheme) {
      document.documentElement.setAttribute("data-theme", userTheme);
    }
    function switchTheme() {
      let currentTheme = document.documentElement.getAttribute("data-theme");
      let newTheme = currentTheme === "light" ? "dark" : "light";
      document.documentElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
    }
  </script>
  <!-- End Theme code -->

  <body>
    <header>
      <nav>
        <h2><a href="/">Maiste</a></h2>
        <ul>
          <li><a href="/about">About</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/projects">Projects</a></li>
          <li><a href="/wiki">Wiki</a></li>
          <li>
            <button id="theme-toggle" onclick="switchTheme()">
              <svg
                id="theme-moon"
                width="23.977"
                xmlns="http://www.w3.org/2000/svg"
                height="24"
                fill="none"
              >
                <g class="feather feather-moon" style="fill: rgb(0, 0, 0)">
                  <path
                    d="M20.979,12.790C20.542,17.526,16.499,21.104,11.750,20.958C7.001,20.812,3.185,16.992,3.039,12.238C2.894,7.484,6.468,3.438,11.199,3.000C9.141,5.786,9.430,9.660,11.878,12.111C14.326,14.561,18.196,14.850,20.979,12.790ZZ"
                    fill="none"
                    style="fill: currentColor"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M20.979,12.790C20.542,17.526,16.499,21.104,11.750,20.958C7.001,20.812,3.185,16.992,3.039,12.238C2.894,7.484,6.468,3.438,11.199,3.000C9.141,5.786,9.430,9.660,11.878,12.111C14.326,14.561,18.196,14.850,20.979,12.790ZZ"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                </g>
              </svg>

              <svg
                id="theme-sun"
                width="24"
                xmlns="http://www.w3.org/2000/svg"
                height="24"
                fill="currentColor"
              >
                <g class="feather feather-sun">
                  <ellipse
                    cx="12"
                    cy="12"
                    rx="5"
                    ry="5"
                    transform="matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)"
                    fill="currentColor"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <ellipse
                      cx="12"
                      cy="12"
                      rx="5"
                      ry="5"
                      transform="matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M12.000,1.000L12.000,3.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M12.000,1.000L12.000,3.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M12.000,21.000L12.000,23.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M12.000,21.000L12.000,23.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M4.220,4.220L5.640,5.640"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M4.220,4.220L5.640,5.640"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M18.360,18.360L19.780,19.780"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M18.360,18.360L19.780,19.780"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M1.000,12.000L3.000,12.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M1.000,12.000L3.000,12.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M21.000,12.000L23.000,12.000"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M21.000,12.000L23.000,12.000"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M4.220,19.780L5.640,18.360"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M4.220,19.780L5.640,18.360"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                  <path
                    d="M18.360,5.640L19.780,4.220"
                    fill="none"
                    style="fill: currentColor; fill-opacity: 0"
                    class="fills"
                  />
                  <g fill="none" stroke-linejoin="round" class="strokes">
                    <path
                      d="M18.360,5.640L19.780,4.220"
                      style="
                        fill: none;
                        stroke-width: 2;
                        stroke: currentColor;
                        stroke-opacity: 1;
                      "
                      class="stroke-shape"
                    />
                  </g>
                </g>
              </svg>
            </button>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <div class="container"><article>
  <h1>WebDev - Front</h1>
  <div class="metadata"><p>description: Javascript, Typescript and Co. Messy notes to be split</p><p>lang: fr
    </p>
  </div><h3 id="terminologie"><a class="anchor" aria-hidden="true" href="#terminologie"></a>Terminologie</h3>
<ul>
<li><em>DOM</em>: Document Object Model. Représentation du Document.</li>
<li><em>Bundler</em>: create a unique file with all the code needed. Avoid dealing with <code>import</code>.</li>
<li><em>SPA</em>: Single Page Application: the application lives in a single html page.</li>
<li><em>IIFE</em>:  Immediately Invoked Function Expression i.e ancêtre de <em>ESModule</em></li>
</ul>
<h3 id="npm"><a class="anchor" aria-hidden="true" href="#npm"></a>NPM</h3>
<ul>
<li><code>npm install</code> or <code>: installe le packages spécifié dans le </code>package.json``</li>
<li><code>npm install -D</code>: installe le package spécifié dans le <code>package.json</code> comme une dépendances dev</li>
<li><code>npm &lt;script&gt;</code>: run the script specified in the <code>package.json</code></li>
</ul>
<h2 id="javascript"><a class="anchor" aria-hidden="true" href="#javascript"></a>Javascript</h2>
<h3 id="pièges"><a class="anchor" aria-hidden="true" href="#pièges"></a>Pièges</h3>
<ul>
<li>Attention au scope de <code>this</code> qui est dans une <code>function() {}</code> car il prend le scope de l'appelant:</li>
</ul>
<pre><code class="language-js">class Truc {
    constructor(this) {
        this.msg;
    }
    print() {
        setTimeout(function(){
            console.log(msg);
        }.bind(thi))
    }
 

    /* Sont équivalents */
    print() {
        setTimeout(() =&gt; ){
            console.log(msg);
        })
    }
}
</code></pre>
<h3 id="import--export"><a class="anchor" aria-hidden="true" href="#import--export"></a>Import / export</h3>
<ul>
<li><code>export</code> ne peut être utiliser qu'à la racine du fichier.</li>
<li>On a le <code>default</code> import mais pour permettre le <em>Tree Shaking</em>, on doit utiliser <code>import { X, Y } from &quot;./path&quot;;</code></li>
</ul>
<h3 id="typescript"><a class="anchor" aria-hidden="true" href="#typescript"></a>Typescript</h3>
<h4 id="infos"><a class="anchor" aria-hidden="true" href="#infos"></a>Infos</h4>
<ul>
<li>Activer les <code>compilerOptions</code> à <code>&quot;strict&quot; : true</code> pour s'assurer qu'il fasse le
maximum.</li>
</ul>
<h4 id="types"><a class="anchor" aria-hidden="true" href="#types"></a>Types</h4>
<p>On peut avoir une énumération de string à partir des clefs d'un objet:</p>
<pre><code class="language-typescript">type Point = {
    x: number,
    y: number
}

// &quot;x&quot; | &quot;y&quot;
type KeyPoint = keyof Point

// z = &quot;x&quot; ou z = &quot;y&quot;
function call(z : KeyPoint) {
    return z;
}
</code></pre>
<h3 id="webrowser"><a class="anchor" aria-hidden="true" href="#webrowser"></a>Webrowser</h3>
<ul>
<li>Utiliser la console pour débugguer, c'est fait pour.</li>
</ul>
<h3 id="storage"><a class="anchor" aria-hidden="true" href="#storage"></a>Storage</h3>
<h4 id="localstorage"><a class="anchor" aria-hidden="true" href="#localstorage"></a>LocalStorage</h4>
<p>Stockage natif des browser mais n'utilise pas <code>indexedDB</code> donc moins de fonctionnalités.</p>
<h4 id="localforage"><a class="anchor" aria-hidden="true" href="#localforage"></a>LocalForage</h4>
<p>Stockage qui repose sur localStorage mais support l'asynchrone.</p>
<h2 id="bundler"><a class="anchor" aria-hidden="true" href="#bundler"></a>Bundler</h2>
<ul>
<li>Il résout les imports en faisant un fichier avec tout !</li>
<li>Il fonctionne avec <code>require/module.exports</code> et les <code>export/import</code>.</li>
</ul>
<h3 id="webpack"><a class="anchor" aria-hidden="true" href="#webpack"></a>Webpack</h3>
<ul>
<li>La configuration se fait dans un <code>webpack.config.js</code>. Le fichier produit est dans <code>dist/main.js</code></li>
<li>Il prend un unique point d'entrée.</li>
<li>En cas de changement dans le <code>webpack.config.js</code>, il faut restart le serveur.</li>
</ul>
<h3 id="transpiler"><a class="anchor" aria-hidden="true" href="#transpiler"></a>Transpiler</h3>
<ul>
<li><code>Babel</code> transpile vers du &quot;vieux&quot; (ES5) Js pour assurer la compatibilité des fonctions JS. <em>Polyfills</em> étends les capacités de &quot;transpilage&quot; de Babel.</li>
<li><code>Core-js</code> est un <em>Polyfills</em>.</li>
<li><code>Babel</code> a besoin d'avoir <code>babel-loader</code> pour fonctionner avec <code>webpack</code>.</li>
</ul>
<h2 id="sass"><a class="anchor" aria-hidden="true" href="#sass"></a>SASS</h2>
<ul>
<li>Un <code>css</code> est un <code>sass</code> valide.</li>
<li>On définit les données partielles dans les fichiers commençant par <code>_name.scss</code>. Il peut ensuite être chargé à un autre endroit via <code>@use &quot;./name&quot;;</code>.</li>
<li><code>min-heigth: 100vh</code> signifie que le composant prend au moins la taille de la vue. En utilisant un container  <code>flex, column</code> et en assignant &quot;`margin-top: auto&quot;, le composant
se place en bas.</li>
</ul>
<h2 id="css"><a class="anchor" aria-hidden="true" href="#css"></a>CSS</h2>
<ul>
<li>Pour merger facilement les propriétés de tailwind :
<pre><code class="language-js">import { type ClassValue, clsx } from &quot;clsx&quot;;
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

</code></pre>
</li>
</ul>
<h2 id="tools"><a class="anchor" aria-hidden="true" href="#tools"></a>Tools</h2>
<h3 id="eslint"><a class="anchor" aria-hidden="true" href="#eslint"></a>ESLint</h3>
<ul>
<li>Avec <code>create-react-app</code>, tout est déjà installer. Il faut juste lancer <code>npm init @eslint/config</code> et ne pas installer les dépendances.</li>
<li>Il faut ajouter <code>plugin:react/jsx-runtime</code> dans la list <code>extends</code> du <em>.eslintrc.json</em>.</li>
</ul>
<h3 id="prettier"><a class="anchor" aria-hidden="true" href="#prettier"></a>Prettier</h3>
<ul>
<li>
<p>On peut l'installer avec: <code>npm install prettier@^version -D --save-exact</code></p>
</li>
<li>
<p><code>npx prettier --check .</code>: permet de vérifier les règles dans le code.</p>
</li>
<li>
<p><code>npx prettier --write .</code>: modifier les fichiers avec le bon formatage.</p>
</li>
<li>
<p><code>npm install --save-dev eslint-config-prettier@^8.5.0</code> permet de partager la config du linter et du formateur</p>
</li>
<li>
<p><code>npm install --save-dev eslint-plugin-prettier@^4.2.1</code> permet d'avoir un plugin de linter pour eslint qui regarde le formatage.</p>
</li>
<li>
<p>Dans ce cas, il faut penser à étendre la configuration <em>.eslintrc.json</em> avec:</p>
</li>
</ul>
<pre><code class="language-json">{
  &quot;extends&quot;: [
    &quot;some-other-config-you-use&quot;,
    &quot;plugin:prettier/recommended&quot;
  ]
  ...
  &quot;plugins&quot;: [..., &quot;prettier&quot;]
}
</code></pre>
<h3 id="mrm"><a class="anchor" aria-hidden="true" href="#mrm"></a>Mrm</h3>
<ul>
<li>Permet d'automatiser la configuration des fichiers en se basant sur la configuration présente.</li>
</ul>
<h3 id="husky"><a class="anchor" aria-hidden="true" href="#husky"></a>Husky</h3>
<ul>
<li>Git hooks pour en JS.</li>
</ul>
<h2 id="cjs-vs-esm"><a class="anchor" aria-hidden="true" href="#cjs-vs-esm"></a>CJS vs ESM</h2>
<ul>
<li>Lire la doc de https://antfu.me/posts/publish-esm-and-cjs</li>
</ul>
<h2 id="module-bundlers-webpack"><a class="anchor" aria-hidden="true" href="#module-bundlers-webpack"></a>Module Bundlers: Webpack</h2>
<p>Webpack is a module bundler that allows to resolve dependencies to make file exportable via the web.</p>
<h2 id="optimise-the-code"><a class="anchor" aria-hidden="true" href="#optimise-the-code"></a>Optimise the code</h2>
<ul>
<li><a href="https://www.joshwcomeau.com/performance/embracing-modern-image-formats/">You might not need jQuery</a>: when you can do it in CSS and vanilla JavaScript</li>
<li><a href="https://www.joshwcomeau.com/performance/embracing-modern-image-formats/">Embracing modern image format</a>: use webP if you can</li>
</ul>
</article>
</div>
    </main>

    <footer>
      <p>
        This site is part of the
        <a href="https://ring.muhokama.fun">Muhokama ring</a>
      </p>
      <p>
        <a href="https://ring.muhokama.fun/u/maiste/pred">Previous</a> -
        <a href="https://ring.muhokama.fun/u/maiste/succ">Next</a>
      </p>
      <p>
        Website written proudly with
        <a href="https://github.com/xhtmlboy/yocaml">Yocaml</a> ♡
      </p>
    </footer>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
